- job:
    project-type: folder
    name: LYNX64

- job:
    project-type: folder
    name: WINX64

- job-template:
    name: 'LYNX64/{name}'
    display-name: 'LYNX64/{name}'
    project-type: freestyle
    description: 'LYNX64 job'
    node: linux
    build-discarder:
        daysToKeep: -1
        numToKeep: 2
        artifactDaysToKeep: -1
        artifactNumToKeep: -1
    scm:
        - git:
            url: https://github.com/kitsune-ONE-team/KITSUNETSUKI-SDK.git
    parameters:
        - bool:
            name: CLEAN
            default: false
        - string:
            name: ANACONDA_TOKEN
    builders:
        - shell: |
            ./jenkins_build.sh

- job-template:
    name: 'WINX64/{name}'
    display-name: 'WINX64/{name}'
    project-type: freestyle
    description: 'WINX64 job'
    node: windows
    build-discarder:
        daysToKeep: -1
        numToKeep: 2
        artifactDaysToKeep: -1
        artifactNumToKeep: -1
    scm:
        - git:
            url: https://github.com/kitsune-ONE-team/KITSUNETSUKI-SDK.git
    parameters:
        - bool:
            name: CLEAN
            default: false
        - string:
            name: ANACONDA_TOKEN
    builders:
        - batch: |
            jenkins_build.bat

- project:
    name: 'LYNX64-jobs'
    jobs:
        - 'LYNX64/{name}':
            name: blender
        - 'LYNX64/{name}':
            name: bullet
        - 'LYNX64/{name}':
            name: panda3d
        - 'LYNX64/{name}':
            name: panda3d-kphys
        - 'LYNX64/{name}':
            name: panda3d-krender
        - 'LYNX64/{name}':
            name: runtime
        - 'LYNX64/{name}':
            name: realsense
        - 'LYNX64/{name}':
            name: sdl

- project:
    name: 'WINX64-jobs'
    jobs:
        - 'WINX64/{name}':
            name: blender
        - 'WINX64/{name}':
            name: bullet
        - 'WINX64/{name}':
            name: panda3d
        - 'WINX64/{name}':
            name: panda3d-kphys
        - 'WINX64/{name}':
            name: panda3d-krender
        - 'WINX64/{name}':
            name: runtime

- job-template:
    name: 'LYNX64/{name}-sdk'
    display-name: 'LYNX64/{name}-sdk'
    project-type: pipeline
    description: 'LYNX64 pipeline'
    node: linux
    build-discarder:
        daysToKeep: -1
        numToKeep: 2
        artifactDaysToKeep: -1
        artifactNumToKeep: -1
    dsl: |
        stage('bullet') {{
            build job: 'bullet', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}
        stage('panda3d') {{
            build job: 'panda3d', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}
        stage('panda3d-kphys') {{
            build job: 'panda3d-kphys', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}
        stage('panda3d-krender') {{
            build job: 'panda3d-krender', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}
        stage('runtime') {{
            build job: 'runtime', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}

- job-template:
    name: 'WINX64/{name}-sdk'
    display-name: 'WINX64/{name}-sdk'
    project-type: pipeline
    description: 'WINX64 pipeline'
    node: windows
    build-discarder:
        daysToKeep: -1
        numToKeep: 2
        artifactDaysToKeep: -1
        artifactNumToKeep: -1
    dsl: |
        stage('bullet') {{
            build job: 'bullet', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}
        stage('panda3d') {{
            build job: 'panda3d', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}
        stage('panda3d-kphys') {{
            build job: 'panda3d-kphys', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}
        stage('panda3d-krender') {{
            build job: 'panda3d-krender', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}
        stage('runtime') {{
            build job: 'runtime', parameters: [booleanParam(name: 'CLEAN', value: 'true')]
        }}

- project:
    name: kitsunetsuki-sdk
    jobs:
        - 'LYNX64/{name}-sdk':
            name: kitsunetsuki
        - 'WINX64/{name}-sdk':
            name: kitsunetsuki
