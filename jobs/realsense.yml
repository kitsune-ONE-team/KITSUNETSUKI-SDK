- job-template:
    name: 'realsense-lynx64'
    display-name: 'realsense-lynx64'
    project-type: freestyle
    description: Intel RealSense SDK
    node: linux
    build-discarder:
        daysToKeep: -1
        numToKeep: 2
        artifactDaysToKeep: -1
        artifactNumToKeep: -1
    scm:
        - git:
            url: https://github.com/IntelRealSense/librealsense.git
            branches:
              - refs/tags/v{version}
            wipe-workspace: false
    builders:
        - cmake:
            source-dir: .
            working-dir: '{build}'
            generator: '{generator}'
            build-type: Release
            other-arguments: |
                -DBUILD_EXAMPLES=OFF
                -DBUILD_GLSL_EXTENSIONS=OFF
                -DBUILD_LEGACY_LIVE_TEST=OFF
                -DBUILD_NETWORK_DEVICE=OFF
                -DBUILD_PYTHON_BINDINGS=ON
                -DBUILD_UNIT_TESTS=OFF
                -DBUILD_WITH_TM2=OFF
                -DCMAKE_INSTALL_PREFIX={install}
                -DFORCE_RSUSB_BACKEND=true
                -DMULTITHREADED_BUILD=16
                -DPYTHON_EXECUTABLE={python_executable}
                -DPYTHON_INCLUDE_DIR={python_include}
                -DPYTHON_INSTALL_DIR={install}
                -DPYTHON_LIBRARY={python_library}
                -DUSE_EXTERNAL_USB=OFF
            build-tool-invocations:
                - use-cmake: false
                  arguments: '{make}'
                - use-cmake: false
                  arguments: 'install {make}'

- project:
    name: realsense-lynx64
    jobs:
        - 'realsense-lynx64':
            build: /app/build/realsense
            generator: Unix Makefiles
            install: /app/opt/realsense/lib/python3.12/site-packages
            make: '-j 16'
            python_executable: /app/opt/pythonnt/bin/python3.12
            python_include: /app/opt/pythonnt/include/python3.12
            python_library: /app/opt/pythonnt/lib/libpython3.12.so.1.0
            python_version: '3.12'
            version: '2.55.1'
