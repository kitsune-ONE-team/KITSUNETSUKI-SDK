- job-template:
    name: 'openal-{arch}'
    display-name: 'openal-{arch}'
    project-type: freestyle
    description: OpenAL Soft is a software implementation of the OpenAL 3D audio API
    node: '{node}'
    build-discarder:
        daysToKeep: -1
        numToKeep: 2
        artifactDaysToKeep: -1
        artifactNumToKeep: -1
    scm:
        - git:
            url: https://github.com/kcat/openal-soft.git
            branches:
              - refs/tags/1.23.1
            wipe-workspace: false
    builders:
        - cmake:
            source-dir: .
            working-dir: '{build}'
            generator: '{generator}'
            build-type: Release
            other-arguments: |
                -DCMAKE_CXX_FLAGS=-fPIC
                -DCMAKE_C_FLAGS=-fPIC
                -DCMAKE_INSTALL_PREFIX={install}
                -DLIBTYPE=STATIC
                -DMULTITHREADED_BUILD=16
            build-tool-invocations:
                - use-cmake: false
                  arguments: '{make}'
                - use-cmake: false
                  arguments: 'install {make}'

- project:
    name: openal
    jobs:
        - 'openal-{arch}':
            arch: lynx64
            build: /app/build/openal
            generator: 'Unix Makefiles'
            install: /app/opt/openal
            make: '-j 16'
            node: linux
        # - 'openal-{arch}':
        #     arch: winx64
        #     build: 'C:\build\openal'
        #     generator: NMake Makefiles
        #     install: 'C:\opt\openal'
        #     make: ''
        #     node: windows
