- job:
    name: python-lynx64
    display-name: python-lynx64
    project-type: freestyle
    description: The Python programming language.
    node: linux
    build-discarder:
        daysToKeep: -1
        numToKeep: 2
        artifactDaysToKeep: -1
        artifactNumToKeep: -1
    scm:
        - git:
            url: https://github.com/python/cpython.git
            branches:
              - refs/tags/v3.10.0
            wipe-workspace: false
            timeout: 60
    builders:
        - shell: |
            THIRDPARTY=/root/jenkins/workspace/blender-thirdparty-lynx64
            export CFLAGS=-I${THIRDPARTY}/zlib/include
            export CPPFLAGS=-I${THIRDPARTY}/zlib/include
            export LDFLAGS=-L${THIRDPARTY}/zlib/lib
            mkdir -p build
            cd build
            ../configure --prefix=/python --enable-shared
            make
            make install DESTDIR=../dist
            cd ..

            patchelf --set-rpath \$ORIGIN/../lib   dist/python/bin/python3.10
